!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.rbush=t()}}(function(){return function t(i,n,e){function r(o,h){if(!n[o]){if(!i[o]){var s="function"==typeof require&&require;if(!h&&s)return s(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};i[o][0].call(c.exports,function(t){var n=i[o][1][t];return r(n?n:t)},c,c.exports,t,i,n,e)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,i,n){"use strict";function e(t,i){return this instanceof e?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this._nodesUuid={},this._deterministic=!1,this._deterministicSeedFunction=function(t){return t.id},i&&this._initFormat(i),void this.clear()):new e(t,i)}function r(t,i,n){if(!n)return i.indexOf(t);for(var e=0;e<i.length;e++)if(n(t,i[e]))return e;return-1}function a(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function o(t,i){return t.minX-i.minX}function h(t,i){return t.minY-i.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){var n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),r=Math.min(t.maxX,i.maxX),a=Math.min(t.maxY,i.maxY);return Math.max(0,r-n)*Math.max(0,a-e)}function l(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function d(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function m(t,i,n,e,r){for(var a,o=[i,n];o.length;)n=o.pop(),i=o.pop(),n-i<=e||(a=i+Math.ceil((n-i)/e/2)*e,p(t,a,i,n,r),o.push(i,a,a,n))}i.exports=e;var p=t("quickselect"),x=t("./lib/uuid.js");e.prototype={all:function(t){return t=t||this.data,this._all(t,[])},getNode:function(t){return this._nodesUuid[t]},walk:function(t){var i=[],n=this.data,e=function(n){if(i.push(n),t(n,i),!n.children)return void i.pop(n);for(var r=0;r<n.children.length;r++)e(n.children[r]);i.pop(n)};e(n)},search:function(t){for(var i=this.data,n={parentNodes:[],leafNodes:[]},e=this.toBBox,r=0;r<this.data.height;r++)n.parentNodes.push(new Array);if(!d(t,i))return n;for(var a,o,h,s,u=[];i;){for(d(t,e(i))&&n.parentNodes[i.height-1].push(i),a=0,o=i.children.length;a<o;a++)h=i.children[a],s=i.leaf?e(h):h,d(t,s)&&(i.leaf?n.leafNodes.push(h):l(t,s)?this._all(h,n.leafNodes,n.parentNodes):u.push(h));i=u.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!d(t,i))return!1;for(var e,r,a,o,h=[];i;){for(e=0,r=i.children.length;e<r;e++)if(a=i.children[e],o=i.leaf?n(a):a,d(t,o)){if(i.leaf||l(t,o))return!0;h.push(a)}i=h.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var r=this.data;this.data=e,e=r}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=this._createNode([]),this},remove:function(t,i){if(!t)return this;for(var n,e,a,o,h=this.data,s=this.toBBox(t),u=[],c=[];h||u.length;){if(h||(h=u.pop(),e=u[u.length-1],n=c.pop(),o=!0),h.leaf&&(a=r(t,h.children,i),a!==-1)){if(h.children.splice(a,1),u.push(h),this._condense(u),this._deterministic)for(var n=u.length-1;n>=0;n--){var f=u[n];f.id=this._createUniqueId(f.children)}return this}o||h.leaf||!l(h,s)?e?(n++,h=e.children[n],o=!1):h=null:(u.push(h),c.push(n),n=0,e=h,h=h.children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){var i=this;return this.data=t,this.walk(function(t){i._nodesUuid[t.id]=t}),this},setDeterminismSeedFunc:function(t){return this._deterministicSeedFunction=t,this},setDeterminism:function(t){return this._deterministic=t,this},_all:function(t,i,n){for(var e=[];t;)n&&n[t.height-1].push(t),t.leaf?i.push.apply(i,t.children):e.push.apply(e,t.children),t=e.pop();return i},_build:function(t,i,n,e){var r,a=n-i+1,o=this._maxEntries;if(a<=o)return r=this._createNode(t.slice(i,n+1)),this._calcBBox(r,this.toBBox),r;e||(e=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,e-1))),r=this._createNode([]),r.leaf=!1,r.height=e;var h,s,u,c,f=Math.ceil(a/o),l=f*Math.ceil(Math.sqrt(o));for(m(t,i,n,l,this.compareMinX),h=i;h<=n;h+=l)for(u=Math.min(h+l-1,n),m(t,h,u,f,this.compareMinY),s=h;s<=u;s+=f)c=Math.min(s+f-1,u),r.children.push(this._build(t,s,c,e-1));return this._deterministic&&(r.id=this._createUniqueId(r.children)),this._calcBBox(r,this.toBBox),r},_chooseSubtree:function(t,i,n,e){for(var r,a,o,h,u,f,l,d;;){if(e.push(i),i.leaf||e.length-1===n)break;for(l=d=1/0,r=0,a=i.children.length;r<a;r++)o=i.children[r],u=s(o),f=c(t,o)-u,f<d?(d=f,l=u<l?u:l,h=o):f===d&&u<l&&(l=u,h=o);i=h||i.children[0]}return i},_insert:function(t,i,n){var e=this.toBBox,r=n?t:e(t),o=[],h=this._chooseSubtree(r,this.data,i,o);for(h.children.push(t),a(h,r);i>=0;)o[i].children.length>this._maxEntries&&this._split(o,i),this._deterministic&&(o[i].id=this._createUniqueId(o[i].children)),i--;this._adjustParentBBoxes(r,o,i)},_split:function(t,i){var n=t[i],e=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,e);var a=this._chooseSplitIndex(n,r,e),o=this._createNode(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,this._calcBBox(n,this.toBBox),this._calcBBox(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=this._createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,this._calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var e,r,a,o,h,u,c,l;for(u=c=1/0,e=i;e<=n-i;e++)r=this._distBBox(t,0,e,this.toBBox),a=this._distBBox(t,e,n,this.toBBox),o=f(r,a),h=s(r)+s(a),o<u?(u=o,l=e,c=h<c?h:c):o===u&&h<c&&(c=h,l=e);return l},_chooseSplitAxis:function(t,i,n){var e=t.leaf?this.compareMinX:o,r=t.leaf?this.compareMinY:h,a=this._allDistMargin(t,i,n,e),s=this._allDistMargin(t,i,n,r);a<s&&t.children.sort(e)},_allDistMargin:function(t,i,n,e){t.children.sort(e);var r,o,h=this.toBBox,s=this._distBBox(t,0,i,h),c=this._distBBox(t,n-i,n,h),f=u(s)+u(c);for(r=i;r<n-i;r++)o=t.children[r],a(s,t.leaf?h(o):o),f+=u(s);for(r=n-i-1;r>=i;r--)o=t.children[r],a(c,t.leaf?h(o):o),f+=u(c);return f},_adjustParentBBoxes:function(t,i,n){for(var e=n;e>=0;e--)a(i[e],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():this._calcBBox(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")},_calcBBox:function(t,i){this._distBBox(t,0,t.children.length,i,t)},_distBBox:function(t,i,n,e,r){r||(r=this._createNode(null)),r.minX=1/0,r.minY=1/0,r.maxX=-(1/0),r.maxY=-(1/0);for(var o,h=i;h<n;h++)o=t.children[h],a(r,t.leaf?e(o):o);return r},_createUniqueId:function(t){if(this._deterministic){var i=t.map(this._deterministicSeedFunction);return x(i)}return x()},_createNode:function(t){var i=this._createUniqueId(t),n={children:t,height:1,id:i,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};return this._nodesUuid[i]=n,n}}},{"./lib/uuid.js":2,quickselect:4}],2:[function(t,i,n){var e=t("random-seed"),r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=8,o=e.create();i.exports=function(t){var i,n="";t?(o.seed(t),i=o.random):i=Math.random;for(var e=0;e<a;e++)n+=r.charAt(Math.floor(i()*r.length));return n}},{"random-seed":5}],3:[function(t,i,n){function e(t,i,n,e){return JSON.stringify(t,r(i,e),n)}function r(t,i){var n=[],e=[];return null==i&&(i=function(t,i){return n[0]===i?"[Circular ~]":"[Circular ~."+e.slice(0,n.indexOf(i)).join(".")+"]"}),function(r,a){if(n.length>0){var o=n.indexOf(this);~o?n.splice(o+1):n.push(this),~o?e.splice(o,1/0,r):e.push(r),~n.indexOf(a)&&(a=i.call(this,r,a))}else n.push(a);return null==t?a:t.call(this,r,a)}}n=i.exports=e,n.getSerialize=r},{}],4:[function(t,i,n){"use strict";function e(t,i,n,o,h){for(n=n||0,o=o||t.length-1,h=h||a;o>n;){if(o-n>600){var s=o-n+1,u=i-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*f*(s-f)/s)*(u-s/2<0?-1:1),d=Math.max(n,Math.floor(i-u*f/s+l)),m=Math.min(o,Math.floor(i+(s-u)*f/s+l));e(t,i,d,m,h)}var p=t[i],x=n,_=o;for(r(t,n,i),h(t[o],p)>0&&r(t,n,o);x<_;){for(r(t,x,_),x++,_--;h(t[x],p)<0;)x++;for(;h(t[_],p)>0;)_--}0===h(t[n],p)?r(t,n,_):(_++,r(t,_,o)),_<=i&&(n=_+1),i<=_&&(o=_-1)}}function r(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}function a(t,i){return t<i?-1:t>i?1:0}i.exports=e},{}],5:[function(t,i,n){"use strict";var e=t("json-stringify-safe"),r=function(){var t=4022871197,i=function(i){if(i){i=i.toString();for(var n=0;n<i.length;n++){t+=i.charCodeAt(n);var e=.02519603282416938*t;t=e>>>0,e-=t,e*=t,t=e>>>0,e-=t,t+=4294967296*e}return 2.3283064365386963e-10*(t>>>0)}t=4022871197};return i},a=function(t){return function(){var i,n,a=48,o=1,h=a,s=new Array(a),u=0,c=new r;for(i=0;i<a;i++)s[i]=c(Math.random());var f=function(){++h>=a&&(h=0);var t=1768863*s[h]+2.3283064365386963e-10*o;return s[h]=t-(o=0|t)},l=function(t){return Math.floor(t*(f()+1.1102230246251565e-16*(2097152*f()|0)))};l.string=function(t){var i,n="";for(i=0;i<t;i++)n+=String.fromCharCode(33+l(94));return n};var d=function(){var t=Array.prototype.slice.call(arguments);for(i=0;i<t.length;i++)for(n=0;n<a;n++)s[n]-=c(t[i]),s[n]<0&&(s[n]+=1)};return l.cleanString=function(t){return t=t.replace(/(^\s*)|(\s*$)/gi,""),t=t.replace(/[\x00-\x1F]/gi,""),t=t.replace(/\n /,"\n")},l.hashString=function(t){for(t=l.cleanString(t),c(t),i=0;i<t.length;i++)for(u=t.charCodeAt(i),n=0;n<a;n++)s[n]-=c(u),s[n]<0&&(s[n]+=1)},l.seed=function(t){"undefined"!=typeof t&&null!==t||(t=Math.random()),"string"!=typeof t&&(t=e(t,function(t,i){return"function"==typeof i?i.toString():i})),l.initState(),l.hashString(t)},l.addEntropy=function(){var t=[];for(i=0;i<arguments.length;i++)t.push(arguments[i]);d(u++ +(new Date).getTime()+t.join("")+Math.random())},l.initState=function(){for(c(),i=0;i<a;i++)s[i]=c(" ");o=1,h=a},l.done=function(){c=null},"undefined"!=typeof t&&l.seed(t),l.range=function(t){return l(t)},l.random=function(){return l(Number.MAX_VALUE-1)/Number.MAX_VALUE},l.floatBetween=function(t,i){return l.random()*(i-t)+t},l.intBetween=function(t,i){return Math.floor(l.random()*(i-t+1))+t},l}()};a.create=function(t){return new a(t)},i.exports=a},{"json-stringify-safe":3}]},{},[1])(1)});
